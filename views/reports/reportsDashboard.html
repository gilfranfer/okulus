<article id="reportsDash">
  <!-- Results Alert -->
  <div class="row">
    <!-- No Reports Found -->
    <div class="col" ng-show="!response.loading && reportsToDisplay && reportsToDisplay.length == 0">
      <div class="alert alert-danger" role="alert">
        {{i18n.admin.dashboard.noReportsError}}
      </div>
    </div>
    <!-- Reports Found -->
    <div class="col" ng-show="!response.loading && reportsToDisplay && reportsToDisplay.length > 0">
      <div class="alert alert-success" role="alert">
        {{reportsToDisplay.length}} {{i18n.reportFinder.resultsLoaded}}
      </div>
    </div>
  </div>

  <div ng-show="reportsToDisplay && reportsToDisplay.length > 0">
    <!-- Summary Cards -->
    <article class="row mb-3" >
      <!-- Reports Summary -->
      <div class="col-sm-6 col-md-4 col-lg-4">
        <div class="card h-100">
          <div class="card-body">
            <h4 class="card-title">{{i18n.navigation.admin.reports}}</h4>
            <hr>
            <div class="row">
              <div class="col">
                <span class="badge badge-success">{{reunionSummary.approvedReports}}</span>
                <span>{{i18n.reports.approvedLbl}}</span>
                <br>
                <span class="badge badge-danger">{{reunionSummary.rejectedReports}}</span>
                <span>{{i18n.reports.rejectedLbl}}</span>
                <br>
                <span class="badge badge-primary">{{reunionSummary.pendingReports}}</span>
                <span>{{i18n.reports.pendingLbl}}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Reunions Summary -->
      <div class="col-sm-6 col-md-4 col-lg-4">
        <div class="card h-100">
          <div class="card-body">
            <h4 class="card-title">{{i18n.navigation.admin.reunions}}</h4>
            <hr>
            <div class="row">
              <div class="col">
                <span class="badge badge-success">{{reunionSummary.completedReunions}}</span>
                <span>{{i18n.reports.completedLbl}}</span>
                <br>
                <span class="badge badge-danger">{{reunionSummary.canceledReunions}}</span>
                <span>{{i18n.reports.canceledLbl}}</span>
                <br>
                <span class="badge badge-primary">{{reunionSummary.totalReunions}}</span>
                <span>{{i18n.reportFinder.totalLbl}}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- attendance Summary -->
      <div class="col-sm-6 col-md-4 col-lg-4">
        <div class="card h-100">
          <div class="card-body">
            <h4 class="card-title">{{i18n.reportFinder.attendanceSummaryTitle}}</h4>
            <hr>
            <div class="col">
              <span class="badge badge-success">{{reunionSummary.membersAttendance}}</span>
              <span>{{i18n.reports.membersLbl}}</span>
              <br>
              <span class="badge badge-success">{{reunionSummary.guestsAttendance}}</span>
              <span>{{i18n.reports.guestsLbl}}</span>
              <br>
              <span class="badge badge-primary">{{reunionSummary.totalAttendance}}</span>
              <span>{{i18n.reportFinder.totalLbl}}</span>
            </div>
          </div>
        </div>
      </div>
    </article>

    <!-- Reports Table -->
    <article class="row mb-3">
      <div class="col">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">{{i18n.reportFinder.reportsListTitle}}</h4>
            <hr>
            <!-- Search -->
            <div class="row mb-3">
              <div class="col">
                <input type="text" placeholder="{{i18n.forms.searchHint}}" class="form-control"
                 ng-model="filterText" ng-show="reportsToDisplay.length > config.minResultsToshowFilter"/>
              </div>
            </div>
            <!-- Reports Table -->
            <div class="pre-scrollable mb-4">
            <table class="table table-responsive-s table-md table-striped">
              <thead class="">
                <tr>
                  <th scope="col"></th>
                  <th scope="col">
                    <span class="clickable fas fa-md fa-sort"
                      ng-click="chageSort('reviewStatus')" ng-show="sortBy!='reviewStatus'"></span>
                    <span class="clickable fas fa-md fa-sort-up"
                      ng-click="chageSort('reviewStatus')" ng-show="(sortBy=='reviewStatus' && descSort)"></span>
                    <span class="clickable fas fa-md fa-sort-down"
                      ng-click="chageSort('reviewStatus')" ng-show="(sortBy=='reviewStatus' && !descSort)"></span>
                    <span>{{i18n.reportFinder.table.reportStatus}}</span>
                  </th>
                  <th scope="col">
                    <span class="clickable fas fa-md fa-sort"
                      ng-click="chageSort('groupname')" ng-show="sortBy!='groupname'"></span>
                    <span class="clickable fas fa-md fa-sort-up"
                      ng-click="chageSort('groupname')" ng-show="(sortBy=='groupname' && descSort)"></span>
                    <span class="clickable fas fa-md fa-sort-down"
                      ng-click="chageSort('groupname')" ng-show="(sortBy=='groupname' && !descSort)"></span>
                    <span>{{i18n.reportFinder.table.group}}</span>
                  </th>
                  <th scope="col">
                    <span class="clickable fas fa-md fa-sort"
                    ng-click="chageSort('dateMilis')" ng-show="sortBy!='dateMilis'"></span>
                    <span class="clickable fas fa-md fa-sort-up"
                    ng-click="chageSort('dateMilis')" ng-show="(sortBy=='dateMilis' && descSort)"></span>
                    <span class="clickable fas fa-md fa-sort-down"
                    ng-click="chageSort('dateMilis')" ng-show="(sortBy=='dateMilis' && !descSort)"></span>
                    <span>{{i18n.reportFinder.table.date}}</span>
                  </th>
                  <th scope="col">
                    <span class="clickable fas fa-md fa-sort"
                      ng-click="chageSort('weekId')" ng-show="sortBy!='weekId'"></span>
                    <span class="clickable fas fa-md fa-sort-up"
                      ng-click="chageSort('weekId')" ng-show="(sortBy=='weekId' && descSort)"></span>
                    <span class="clickable fas fa-md fa-sort-down"
                      ng-click="chageSort('weekId')" ng-show="(sortBy=='weekId' && !descSort)"></span>
                    <span>{{i18n.reportFinder.table.week}}</span>
                  </th>
                  <th scope="col">
                    <span class="clickable fas fa-md fa-sort"
                      ng-click="chageSort('status')" ng-show="sortBy!='status'"></span>
                    <span class="clickable fas fa-md fa-sort-up"
                      ng-click="chageSort('status')" ng-show="(sortBy=='status' && descSort)"></span>
                    <span class="clickable fas fa-md fa-sort-down"
                      ng-click="chageSort('status')" ng-show="(sortBy=='status' && !descSort)"></span>
                    <span>{{i18n.reportFinder.table.reunionStatus}}</span>
                  </th>
                  <th scope="col">
                    <span class="clickable fas fa-md fa-sort"
                      ng-click="chageSort('totalAttendance')" ng-show="sortBy!='totalAttendance'"></span>
                    <span class="clickable fas fa-md fa-sort-up"
                      ng-click="chageSort('totalAttendance')" ng-show="(sortBy=='totalAttendance' && descSort)"></span>
                    <span class="clickable fas fa-md fa-sort-down"
                      ng-click="chageSort('totalAttendance')" ng-show="(sortBy=='totalAttendance' && !descSort)"></span>
                      <span>{{i18n.reportFinder.table.attendance}}</span>
                  </th>
                  <th scope="col">
                    <span class="clickable fas fa-md fa-sort"
                      ng-click="chageSort('duration')" ng-show="sortBy!='duration'"></span>
                    <span class="clickable fas fa-md fa-sort-up"
                      ng-click="chageSort('duration')" ng-show="(sortBy=='duration' && descSort)"></span>
                    <span class="clickable fas fa-md fa-sort-down"
                      ng-click="chageSort('duration')" ng-show="(sortBy=='duration' && !descSort)"></span>
                    <span>{{i18n.reportFinder.table.duration}}</span>
                  </th>
                  <th scope="col" ng-if="config.reports.showMoneyField">
                    <span class="clickable fas fa-md fa-sort"
                      ng-click="chageSort('money')" ng-show="sortBy!='money'"></span>
                    <span class="clickable fas fa-md fa-sort-up"
                      ng-click="chageSort('money')" ng-show="(sortBy=='money' && descSort)"></span>
                    <span class="clickable fas fa-md fa-sort-down"
                      ng-click="chageSort('money')" ng-show="(sortBy=='money' && !descSort)"></span>
                    <span>{{i18n.reportFinder.table.money}}</span>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="report in reportsToDisplay | filter:filterText | orderBy:sortBy:descSort track by report.$id">
                  <!-- <td scope="row">{{$index + 1}}</td> -->
                  <td scope="row">
                    <a class="clickable fas fa-lg fa-eye"  target="_blank"
                      ng-href="#!/reports/edit/{{report.$id}}"></a>
                  </td>
                  <!-- Report Status -->
                  <td scope="row" class="text-danger" ng-if="report.reviewStatus == 'rejected'">
                    {{i18n.reports.rejectedStatusLbl}}
                  </td>
                  <td scope="row" class="text-success" ng-if="report.reviewStatus == 'approved'">
                    {{i18n.reports.approvedStatusLbl}}
                  </td>
                  <td scope="row" class="text-blue" ng-if="!report.reviewStatus || report.reviewStatus == 'pending'">
                    {{i18n.reports.pendingStatusLbl}}
                  </td>
                  <td scope="row">{{report.groupname}}</td>
                  <td scope="row">{{report.dateMilis | date: config.formats.date}}</td>
                  <td scope="row">{{report.weekId}}</td>
                  <!-- Reunion Status -->
                  <td scope="row" class="text-danger" ng-if="report.status == 'canceled'">
                    {{i18n.reportFinder.table.canceledLbl}}
                  </td>
                  <td scope="row" class="text-success" ng-if="report.status == 'completed'">
                    {{i18n.reportFinder.table.completedLbl}}
                  </td>
                  <td scope="row">{{report.totalAttendance}}</td>
                  <td scope="row">{{report.duration}} min</td>
                  <td scope="row" ng-if="config.reports.showMoneyField">{{report.money | currency }}</td>
                </tr>
              </tbody>
            </table>
            </div>
          </div>
        </div>
      </div>
    </article>

    <!-- Attendance Charts -->
    <article class="row mb-3">
      <div class="col">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">
              {{i18n.reportFinder.attendanceChartsTitle}}
            </h4>
            <hr>
            <div class="row mt-4">
              <div class="col mb-3">
                <div id="attendanceByGroupContainer" style="width:100%;"></div>
              </div>
            </div>
            <div class="row mt-4">
              <div class="col-sm mb-3">
                <div id="attendancePieContainer" style="width:100%; height:300px;"></div>
              </div>
              <div class="col-sm mb-3">
                <div id="reunionsPieContainer" style="width:100%; height:300px;"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </article>

    <!-- Duration Chart -->
    <article class="row mb-3">
      <div class="col">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">
              {{i18n.reportFinder.durationChartsTitle}}
            </h4>
            <hr>
            <div class="row mt-4">
              <div class="col-md mb-3">
                <div id="durationContainer" style="width:100%;"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </article>

    <!-- Money Chart -->
    <article class="row mb-3" ng-if="config.reports.showMoneyField">
      <div class="col">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">
              {{i18n.reportFinder.moneyChartsTitle}}
            </h4>
            <hr>
            <div class="row mt-4">
              <div class="col-md mb-3">
                <div id="moneyContainer" style="width:100%;"></div>
              </div>
            </div>
            <!-- <div class="row mt-4">
              <div class="col mb-3">
                <div id="moneyScatterContainer" style="width:100%;"></div>
              </div>
            </div> -->
          </div>
        </div>
      </div>
    </article>
  </div>
</article>
