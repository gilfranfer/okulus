<!-- Group Access Rules, only for admin -->
<section  ng-show="currentSession.user.type != 'user'">
  <!-- Title -->
  <article id="titleCard" class="card h-100 mb-3">
    <div class="card-body">
      <h4 class="card-title">{{i18n.groups.accessTitle}} {{group.name}}</h4>
    </div>
  </article>

  <!-- Create Rule Access -->
  <article class="card mb-3">
    <div class="card-body">
      <p class="lead">
  			{{i18n.groups.newAccessTitle}}
  		</p>
      <span>{{i18n.groups.accessDescription}}</span>
      <!-- Active Members List -->
      <form class="mt-3" name="accessForm" novalidate ng-submit="addRule()">
        <div class="row mb-3">
          <div class="col-8">
            <select id="userSelect" class="form-control form-control-lg" ng-model="access.memberId" ng-required="true">
              <option ng-repeat="member in membersList | orderBy:'shortname' track by member.$id" value="{{member.$id}}">
                {{member.shortname}}
              </option>
            </select>
          </div>
          <div class="col-4">
            <button type="submit" class="btn btn-lg btn-block btn-success clickable" ng-disabled="accessForm.$invalid">
              {{i18n.btns.addBtn}}
            </button>
          </div>
        </div>
      </form>
    </div>
  </article>

  <!-- Alerts -->
  <div ng-include="'views/alerts.html'"></div>
  <!-- No Records Alert -->
  <div class="row">
    <div class="col" ng-show="acessList && acessList.length == 0">
      <div class="alert alert-danger" role="alert">
        {{i18n.groups.noRulesMessage}}
      </div>
    </div>
  </div>
  <!-- Show number of loaded Rules -->
  <div class="alert alert-info" role="alert" ng-show="acessList.length" >
    {{acessList.length}} {{i18n.groups.loadingRulesSuccess}}
    <!-- Load all pending Groups  -->
    <span class="btn-link clickable" ng-click="loadPendingAccessRules()"
      ng-if="(acessList.length < accessRulesParams.maxPossible)" >
      {{i18n.groups.loadPendingRules1}}
      {{accessRulesParams.maxPossible - acessList.length}}
      {{i18n.groups.loadPendingRules2}}
    </span>
  </div>

  <!-- Access Rules Cards -->
  <article id="rulesList" class="row">
    <div class="col-md-6 col-lg-4 mb-3"
      ng-repeat="rule in acessList | filter:accessRulesParams.searchFilter | orderBy:'number' track by rule.$id">
      <div class="card h-100">
        <div class="card-body">
          <h4 class="card-title">
            {{rule.memberName}}
          </h4>
          <hr>
          <p>
            <span class="font-weight-bold">{{i18n.groups.ruleDate}}:</span> {{rule.date | date: config.formats.datetime}}<br>
          </p>
          <!-- Delete Group Button -->
          <div class="row">
            <div class="col-sm form-group">
              <button type="button" class="btn btn-block btn-danger clickable"
              data-toggle="collapse" data-target="#collapseDelete-{{rule.$id}}" aria-expanded="false" aria-controls="collapseDelete-{{rule.$id}}">
              {{i18n.groups.ruleDeleteBtn}}
              </button>
              <div class="collapse" id="collapseDelete-{{rule.$id}}">
                <div class="alert alert-danger" role="alert">
                  {{i18n.alerts.confirmQuestion}}
                  <button type="button" class="btn btn-danger clickable" ng-click="deleteRule(rule.$id)">
                    {{i18n.btns.yesBtn}}
                  </button>
                  <button type="button" class="btn btn-success clickable"
                    data-toggle="collapse" data-target="#collapseDelete-{{rule.$id}}"
                    aria-expanded="false" aria-controls="collapseDelete-{{rule.$id}}">
                    {{i18n.btns.noBtn}}
                  </button>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </article>

</section>
